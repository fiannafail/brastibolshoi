{"version":3,"sources":["webpack:///webpack/bootstrap 33df80ba1f1c6cf8cfc6","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"debug\"","webpack:///./server/handlers/redis.js","webpack:///external \"redis\"","webpack:///./server/config.js","webpack:///./server/models/user.js","webpack:///external \"mongoose\"","webpack:///external \"sequelize\"","webpack:///./server/postgres-connector.js","webpack:///external \"koa-passport\"","webpack:///./server/services/jwt-service.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"sequelize-slugify\"","webpack:///./nuxt.config.js","webpack:///./server/handlers/index.js","webpack:///./server/mongoose-connection.js","webpack:///./server/passport.js","webpack:///./server/routes.js","webpack:///./server/services/socketio.js","webpack:///external \"http\"","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/controllers/_cartoon.js","webpack:///./server/controllers/audio.js","webpack:///./server/controllers/cartoon.js","webpack:///./server/controllers/entry.js","webpack:///./server/controllers/user.js","webpack:///./server/handlers/checkUser.js","webpack:///./server/jwt.js","webpack:///./server/models/_cartoon.js","webpack:///./server/models/audio.js","webpack:///./server/models/cartoon.js","webpack:///./server/models/entry.js","webpack:///external \"bcrypt\"","webpack:///external \"cloudinary\"","webpack:///external \"fs\"","webpack:///external \"koa-decoded-querystring\"","webpack:///external \"koa-multer\"","webpack:///external \"koa-router\"","webpack:///external \"koa2-formidable\"","webpack:///external \"lodash\"","webpack:///external \"mongoose-unique-validator\"","webpack:///external \"os\"","webpack:///external \"passport-local\"","webpack:///external \"path\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"slug-generator\"","webpack:///external \"socket.io\"","webpack:///external \"util\"","webpack:///./server/index.js"],"names":["redisClient","redis","createClient","on","err","console","log","require","promisify","getAsync","get","bind","MONGO_URI","REDIS_URL","DATABASE_URL","process","env","MONGO_URL","REDIS_KEY","JWT_KEY","mongoose","plugin","userSchema","username","type","String","unique","required","role","default","email","password","pre","next","isModified","salt","bcrypt","genSaltSync","hashSync","methods","authenticate","compareSync","passwordHash","statics","done","findOne","user","model","sequelize","dialect","sync","genToken","data","expiration","jwt","sign","expiresIn","verify","token","verifyNoExp","ignoreExpiration","module","exports","head","title","meta","charset","name","content","hid","link","rel","href","siteTitle","plugins","src","ssr","css","loading","color","build","vendor","extractCSS","extend","config","ctx","isClient","rules","push","enforce","test","loader","exclude","koaDecodedQuerystring","app","use","bodyParser","debug","Promise","mongoUri","Error","connect","then","mongodb","LocalStrategy","configure","passport","strategyFunc","User","serializeUser","id","deserializeUser","findById","fs","os","path","multer","upload","dest","cloudinary","cloud_name","api_key","api_secret","router","post","signUp","signIn","checkUser","body","Audio","addCategory","getCategories","addAudio","getAudios","Cartoon","add","getAll","_Cartoon","getCategoryCartoons","getRedis","getMongo","getMoreCartoons","getCartoons","getTagByName","getCartoonBySlug","getCartoonsByTag","getTags","setTag","addAgeCategory","addTag","getMultiseries","file","request","files","reader","createReadStream","stream","createWriteStream","join","pipe","uploader","image","secure_url","Entry","addEntry","server","io","socket","sockets","msg","description","slugify","set","print","tag","emit","_","Op","Sequelize","where","slug","params","cartoon","include","cartoons","findAll","category","all","requests","tagRequest","split","isMultiseries","multiseries","limit","order","offset","parseInt","ne","through","attributes","Categories","create","categories","Tag","group","raw","tags","setTags","audios","Category","audio","find","map","_id","item","distinct","i","save","e","AgeCategory","toString","getOne","el","entry","status","jwtService","accessToken","refreshToken","login","response","header","authorization","decoded","throw","message","confirmedRefreshToken","newAccessToken","newRefreshToken","define","cartoonId","allowNull","primaryKey","STRING","TEXT","unclear","video","year","INTEGER","thumbnail","author","BOOLEAN","parentTitleId","autoIncrement","categoriesId","CartoonTags","tag_id","taggable","taggable_id","references","belongsTo","foreignKey","hasMany","belongsToMany","scope","constraints","SequelizeSlugify","slugifyModel","source","ageCategorySchema","tagSchema","cartoonSchema","Boolean","Number","multiseriesTitle","Schema","Types","ObjectId","ref","entrySchema","host","HOST","port","PORT","dev","nuxt","builder","initialize","initHandlers","mongooseConnector","catch","error","routes","resolve","reject","res","render","req","promise","http","createServer","callback","websockets","listen","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 49);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 33df80ba1f1c6cf8cfc6","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 1\n// module chunks = 0","import redis from 'redis'\nimport { REDIS_URL } from '../config'\n\nexport const redisClient = redis.createClient(REDIS_URL)\n\nredisClient.on('error', function (err) {\n\tconsole.log('Error ' + err)\n})\n\nconst { promisify } = require('util')\nexport const getAsync = promisify(redisClient.get).bind(redisClient)\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/handlers/redis.js","module.exports = require(\"redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redis\"\n// module id = 3\n// module chunks = 0","let MONGO_URI, REDIS_URL, DATABASE_URL\n\nif (process.env.NODE_ENV === 'production') {\n\tMONGO_URI = process.env.MONGO_URL\n\tREDIS_URL = process.env.REDIS_URL\n\tDATABASE_URL = process.env.DATABASE_URL\n} else {\n\tMONGO_URI = 'mongodb://fiannafail:loOhdsdFom5nYCiR@cluster0-shard-00-00-y7wbs.mongodb.net:27017,cluster0-shard-00-01-y7wbs.mongodb.net:27017,cluster0-shard-00-02-y7wbs.mongodb.net:27017/test?ssl=true&replicaSet=Cluster0-shard-0&authSource=admin'\n\tREDIS_URL = 'redis://localhost:6379'\n\tDATABASE_URL = 'postgres://postgres:6354825107@127.0.0.1:5432/postgres'\n}\nconst REDIS_KEY = 'DRKlPeBHbgr0FUSs'\nconst JWT_KEY = 'dFTvn3RxVsXE8ZJafmcQSi7fSAL4L9i8'\n\nexport {\n\tMONGO_URI,\n\tREDIS_URL,\n\tJWT_KEY,\n\tREDIS_KEY,\n\tDATABASE_URL\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/config.js","import mongoose, { Schema } from 'mongoose'\nimport bcrypt from 'bcrypt'\nimport uniqueValidator from 'mongoose-unique-validator'\n\nmongoose.plugin(uniqueValidator)\n\nconst userSchema = new Schema({\n\tusername: { type: String, unique: true, required: true },\n\trole: { type: String, default: 'user', required: true },\n\temail: { type: String, unique: true, required: true },\n\tpassword: { type: String, required: true }\n})\n\nuserSchema.pre('save', function (next) {\n\tif (!this.isModified('password')) {\n\t\treturn next()\n\t}\n\tconst salt = bcrypt.genSaltSync(10)\n\n\tthis.password = bcrypt.hashSync(this.password, salt)\n\tnext()\n})\n\nuserSchema.methods.authenticate = function (password) {\n\treturn bcrypt.compareSync(password, this.passwordHash)\n}\nuserSchema.statics.authenticate = function (username, password, done) {\n\tconsole.log({ username: username, password: password })\n\tthis.findOne({ username: username }, (err, user) => {\n\t\tif (err) {\n\t\t\tconsole.log('Error to check', err)\n\t\t\tdone(err)\n\t\t} else if (user) {\n\t\t\tconsole.log('Success!', user)\n\t\t\tdone(null, user)\n\t\t} else {\n\t\t\tconsole.log('Something else')\n\t\t\tdone(null, false)\n\t\t}\n\t})\n}\n\nexport default mongoose.model('user', userSchema);\n\n\n// WEBPACK FOOTER //\n// ./server/models/user.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 7\n// module chunks = 0","import Sequalize from 'sequelize'\nimport { DATABASE_URL } from './config'\n\nconst sequelize = new Sequalize(DATABASE_URL, {\n\tdialect: 'postgres'\n})\nsequelize.sync()\nexport default sequelize\n\n\n\n// WEBPACK FOOTER //\n// ./server/postgres-connector.js","module.exports = require(\"koa-passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-passport\"\n// module id = 9\n// module chunks = 0","import jwt from 'jsonwebtoken';\nimport { JWT_KEY } from '../config'\n\nexport default {\n  genToken(data, expiration) {\n    return jwt.sign(data, JWT_KEY, { expiresIn: expiration })\n  },\n  verify(token) {\n    return jwt.verify(token, JWT_KEY)\n  },\n  verifyNoExp(token) {\n    return jwt.verify(token, JWT_KEY, { ignoreExpiration: true })\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./server/services/jwt-service.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"sequelize-slugify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize-slugify\"\n// module id = 12\n// module chunks = 0","module.exports = {\n\t/*\n\t** Headers of the page\n\t*/\n\thead: {\n\t\ttitle: 'starter',\n\t\tmeta: [\n\t\t\t{ charset: 'utf-8' },\n\t\t\t{ name: 'viewport', content: 'width=device-width, initial-scale=1' },\n\t\t\t{ hid: 'description', name: 'description', content: 'Nuxt.js project' }\n\t\t],\n\t\tlink: [\n\t\t\t{ rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n\t\t\t{ rel: 'stylesheet', href: 'https://fonts.googleapis.com/css?family=Material+Icons|Roboto+Mono:500|PT+Sans:400,700|Source+Sans+Pro:300,400,600,700&amp;subset=cyrillic' }\n\t\t]\n\t},\n\tenv: {\n\t\tsiteTitle: 'Растибольшой.ком'\n\t},\n\tplugins: [\n\t\t{ src: '~/plugins/vue-notifications.js', ssr: false },\n\t\t{ src: '~/plugins/vue-lazyload.js', ssr: false }\n\t],\n\t/*\n\t** Global CSS\n\t*/\n\tcss: ['~assets/css/main.css'],\n\t/*\n\t** Customize the progress-bar color\n\t*/\n\tloading: { color: '#fa8925' },\n\t/*\n\t ** Build configuration\n\t */\n\tbuild: {\n\t\tvendor: ['vue-notifications'],\n\t\textractCSS: true,\n\t\t/*\n\t\t ** Run ESLINT on save\n\t\t */\n\t\textend (config, ctx) {\n\t\t\tif (ctx.isClient) {\n\t\t\t\tconfig.module.rules.push({\n\t\t\t\t\tenforce: 'pre',\n\t\t\t\t\ttest: /\\.js$/,\n\t\t\t\t\tloader: 'eslint-loader',\n\t\t\t\t\texclude: /(node_modules)/,\n\t\t\t},{\n\t\t\t\t\tenforce: 'pre',\n\t\t\t\t\ttest: /\\.vue$/,\n\t\t\t\t\tloader: 'eslint-loader',\n\t\t\t\t\texclude: /(node_modules)/,\n\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import bodyParser from 'koa2-formidable'\nconst koaDecodedQuerystring = require('koa-decoded-querystring')\n\nexport default (app) => {\n\tapp.use(bodyParser())\n\tapp.use(koaDecodedQuerystring())\n}\n\n\n// WEBPACK FOOTER //\n// ./server/handlers/index.js","import mongoose from 'mongoose'\nconst debug = require('debug')('app:nuxt')\n\nmongoose.Promise = Promise\n\nexport default (mongoUri) => {\n\tif (!mongoUri) {\n\t\tthrow Error('Mongo uri is undefinded')\n\t}\n\treturn mongoose\n\t\t.connect(mongoUri)\n\t\t.then((mongodb) => {\n\t\t\tdebug('Mongo connected')\n\n\t\t\treturn mongodb\n\t\t})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongoose-connection.js","import passport from 'koa-passport'\nconst LocalStrategy = require('passport-local');\nimport User from './models/user'\n\nconst debug = require('debug')('app:nuxt')\n\nfunction configure(passport) {\n\tconst strategyFunc = function (username, password, done) {\n\t\tUser.authenticate(username, password, function (err, user) {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t\tdone(err)\n\t\t\t} else if (user) {\n\t\t\t\tconsole.log('Local - Success')\n\t\t\t\tdone(null, user)\n\t\t\t} else {\n\t\t\t\tconsole.log(err)\n\t\t\t\tdone(null, false)\n\t\t\t}\n\t\t})\n\t}\n\tpassport.use(new LocalStrategy(strategyFunc))\n\n\tpassport.serializeUser(function (user, done) {\n\t\tdone(null, user.id)\n\t})\n\tpassport.deserializeUser(function (id, done) {\n\t\tUser.findById(id, function (err, user) {\n\t\t\tdone(err, user)\n\t\t})\n\t})\n}\n\nmodule.exports = {\n\tconfigure\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/passport.js","import Router from 'koa-router'\nconst debug = require('debug')('app:nuxt')\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst multer = require('koa-multer');\nconst upload = multer({ dest: 'uploads/' });\n\nvar cloudinary = require('cloudinary');\n\ncloudinary.config({ \n\tcloud_name: 'rastibolshoi', \n\tapi_key: '374329698237239', \n\tapi_secret: 'Kax6e6xy_FakEfMUc61P_3XUS_I' \n});\n\nimport User from './controllers/user'\nimport Entry from './controllers/entry'\nimport Cartoon from './controllers/cartoon'\n\nimport Audio from './controllers/audio'\n\nimport _Cartoon from './controllers/_cartoon'\n\nimport checkUser from './handlers/checkUser'\nimport putToken from './jwt'\n\nconst router = new Router()\n\nrouter.post('/user', User.signUp)\nrouter.post('/login', User.signIn)\n//\trouter.get('/admin', putToken(), checkUser())\nrouter.get('/custom',\n\tcheckUser(),\n\tasync (ctx, next) => {\n\t\tctx.body = 'Hello!'\n\t\tdebug('page rendered')\n\t})\n\nrouter.post('/addaudiocat', Audio.addCategory)\nrouter.get('/api/audios/getcategories', Audio.getCategories)\nrouter.post('/api/audios/addaudio', Audio.addAudio)\nrouter.get('/api/audios/getaudios', Audio.getAudios)\n\nrouter.post('/addcartoon', Cartoon.add)\nrouter.get('/getcartoons', Cartoon.getAll)\nrouter.get('/api/cartoons/:slug', _Cartoon.getCategoryCartoons)\n//\trouter.get('/cartoon/:slug', Cartoon.getOne)\nrouter.get('/redis', Cartoon.getRedis)\nrouter.get('/mongo', Cartoon.getMongo)\nrouter.get('/getcats', Cartoon.getCategories)\nrouter.get('/getcategories', _Cartoon.getCategories)\nrouter.get('/api/cartoons/page/:id/:category', _Cartoon.getMoreCartoons)\nrouter.get('/api/cartoons', _Cartoon.getCartoons)\nrouter.get('/api/gettagbyname/:category/:tag', _Cartoon.getTagByName)\nrouter.get('/api/getcartoonbyslug/:cartoon', _Cartoon.getCartoonBySlug)\nrouter.get('/api/getcartoonsbytag/:tag', _Cartoon.getCartoonsByTag)\nrouter.get('/gettags', _Cartoon.getTags)\nrouter.post('/settag', _Cartoon.setTag)\nrouter.post('/add', _Cartoon.add)\nrouter.post('/addcategory', _Cartoon.addCategory)\nrouter.post('/addcat', Cartoon.addAgeCategory)\nrouter.post('/addtag', Cartoon.addTag)\nrouter.get('/getmultiseries', _Cartoon.getMultiseries)\nrouter.post('/up', async (ctx, next) => {\n\tconst file = ctx.request.files.file\n\tconst reader = fs.createReadStream(file.path)\n\tconst stream = fs.createWriteStream(path.join('./uploads', file.name))\n\treader.pipe(stream)\n\tconsole.log('uploading %s -> %s', file.name, stream.path)\n\tctx.body = stream.path\n})\nrouter.post('/upload', async (ctx, next) => {\n\tconst file = ctx.request.files.file.path\n\tconst image = await cloudinary.uploader.upload(file)\n\tconsole.log(image.secure_url) \n\tctx.body = image.secure_url\n})\n// Entries routes\nrouter.post('/addentry', Entry.addEntry)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import socket from 'socket.io'\nimport redis from 'redis'\nimport slugify from 'slug-generator'\nimport { redisClient, getAsync } from '../handlers/redis'\n\nexport default (server) => {\n\tconst io = socket(server)\n\n\tio.sockets.on('connection', (socket) => {\n\t\tconsole.log('a user connected')\n\t\tsocket.on('setTag', async (msg) => {\n\t\t\tconsole.log(msg.name, msg.description + ', ' + slugify(msg.name) + ', ' + msg.name)\n\t\t\tconst tag = await redisClient.set(slugify(msg.name), msg.description + ', ' + msg.name, redis.print)\n\t\t\tconsole.log(tag)\n\t\t})\n\t\tsocket.on('getTag', async (msg) => {\n\t\t\tconsole.log('MESSAGE', msg)\n\t\t\tconst tag = await getAsync(msg)\n\t\t\tio.emit('tag', tag)\n\t\t})\n\t\tsocket.on('chat message', function(msg) {\n\t\t\tio.emit('chat message', msg)\n\t\t})\n\t\tsocket.on('disconnect', () => {\n\t\t\tconsole.log('user disconnected')\n\t\t})\n\t})\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/services/socketio.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 21\n// module chunks = 0","import Sequelize from 'sequelize'\nimport redis from 'redis'\nimport { getAsync } from '../handlers/redis'\nvar _ = require('lodash')\nimport { Cartoon, Tag, Categories } from '../models/_cartoon'\nconst Op = Sequelize.Op\n\nexport default {\n\tgetCartoonBySlug: async(ctx, next) => {\n\t\ttry {\n\t\t\tconst cartoon = await Cartoon.findOne({\n\t\t\t\twhere: {\n\t\t\t\t\tslug: ctx.params.cartoon\n\t\t\t\t},\n\t\t\t\tinclude: [Tag, Categories]\n\t\t\t})\n\t\t\tctx.body = cartoon\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetTagByName: async(ctx, next) => {\n\t\ttry {\n\t\t\tconst tag = getAsync(ctx.params.tag)\n\t\t\tconst cartoons = Cartoon.findAll({\n\t\t\t\tinclude:[{\n\t\t\t\t\tmodel: Tag,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tname: ctx.params.tag\n\t\t\t\t\t}\n\n\t\t\t\t}, {\n\t\t\t\t\tmodel: Categories,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tslug: ctx.params.category\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t})\n\t\t\tconst requests = await Promise.all([tag, cartoons])\n\t\t\tconsole.log({ tag: requests[0], cartoons: requests[1] })\n\t\t\tctx.body = { tag: requests[0], cartoons: requests[1] }\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetCartoonsByTag: async (ctx, next) => {\n\t\tctx.set('Content-Type', 'text/plain; charset=utf-8')\n\t\tconsole.log('tag', ctx.params)\n\t\ttry {\n\t\t\tconst tagRequest = await getAsync(ctx.params.tag)\n\t\t\tconst tag = tagRequest.split(', ')\n\t\t\tconst cartoons = await Cartoon.findAll({\n\t\t\t\tinclude: [{\n\t\t\t\t\tmodel: Tag,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tname: tag[1]\n\t\t\t\t\t}\n\t\t\t\t}, Categories]\n\t\t\t})\n\t\t\tconsole.log(tag[1], cartoons)\n\t\t\tctx.body = { tag: tagRequest, cartoons: cartoons }\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetMultiseries: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst multiseries = await Cartoon.findAll({\n\t\t\t\twhere: { isMultiseries: true }\n\t\t\t})\n\t\t\tctx.body = multiseries\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetCategoryCartoons: async (ctx, next) => {\n\t\tconst limit = 5\n\t\ttry {\n\t\t\tconst category = await Cartoon.findAll({\n\t\t\t\tlimit: limit,\n\t\t\t\torder: [['createdAt', 'DESC']],\n\t\t\t\twhere: { isMultiseries: true },\n\t\t\t\tinclude: [{\n\t\t\t\t\tmodel: Categories,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tslug: ctx.params.slug\n\t\t\t\t\t}\n\t\t\t\t}, Tag]\n\t\t\t})\n\t\t\tctx.body = category\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetMoreCartoons: async (ctx, next) => {\n\t\tconst limit = 5\n\t\tconst offset = parseInt(ctx.params.id)\n\t\tconst category = ctx.params.category !== 'undefined' ? ctx.params.category : { [Op.ne]: null }\n\t\tconsole.log(category)\n\t\tconst cartoons = await Cartoon.findAll({\n\t\t\toffset: offset * limit,\n\t\t\tlimit: limit,\n\t\t\torder: [['createdAt', 'DESC']],\n\t\t\tinclude: [{\n\t\t\t\tmodel: Tag,\n\t\t\t\tthrough: {\n\t\t\t\t\tattributes: ['tag_id']\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tmodel: Categories,\n\t\t\t\twhere: {\n\t\t\t\t\tslug: category\n\t\t\t\t}\n\t\t\t}]\n\t\t})\n\t\tctx.body = cartoons\n\t},\n\tgetCartoons: async (ctx, next) => {\n\t\tconst cartoons = await Cartoon.findAll({\n\t\t\torder: [['createdAt', 'DESC']],\n\t\t\tinclude: [{\n\t\t\t\tmodel: Tag,\n\t\t\t\tthrough: {\n\t\t\t\t\tattributes: ['tag_id']\n\t\t\t\t}\n\t\t\t}, Categories]\n\t\t})\n\t\tctx.body = cartoons\n\t},\n\taddCategory: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst categories = await Categories.create(ctx.request.body)\n\t\t\tctx.body = categories\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetCategories: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst categories = await Categories.findAll(\n\t\t\t\t{ order: ['createdAt'] }\n\t\t\t)\n\t\t\tctx.body = categories\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetTags: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst tags = await Tag.findAll({\n\t\t\t\tattributes: ['name'],\n\t\t\t\tgroup: ['name'],\n\t\t\t\traw: true\n\t\t\t})\n\t\t\tctx.body = tags\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tadd: async (ctx, next) => {\n\t\tconst cartoon = await Cartoon.create(ctx.request.body, {\n\t\t\tinclude: [Tag, Categories]\n\t\t})\n\t\tctx.body = cartoon\n\t},\n\tsetTag: async (ctx, next) => {\n\t\tconst tag = await Cartoon.setTags(['tag1', 'tag2'])\n\t\tctx.body = tag\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/_cartoon.js","import { Audio, Category } from '../models/audio'\n\nexport default {\n\tgetAudios: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst audios = await Audio.findAll({\n\t\t\t\tinclude: [Category]\n\t\t\t})\n\t\t\tctx.body = audios\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetCategories: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst categories = await Category.findAll()\n\t\t\tctx.body = categories\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\taddAudio: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst audio = await Audio.create(ctx.request.body, {\n\t\t\t\tinclude: [Category]\n\t\t\t})\n\t\t\tctx.body = audio\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\taddCategory: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst category = await Category.create(ctx.request.body)\n\t\t\tctx.body = category\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/audio.js","import redis from 'redis'\nimport { Cartoon, AgeCategory, Tag } from '../models/cartoon'\nconst debug = require('debug')('app:nuxt')\nimport { redisClient, getAsync } from '../handlers/redis'\n\nexport default {\n\tgetMultiseries: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst multiseries = await Cartoon.find({ isMultiseries: true })\n\t\t\tctx.body = multiseries.map(item => {\n\t\t\t\treturn {\n\t\t\t\t\t_id: item._id,\n\t\t\t\t\ttitle: item.title\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetTags: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst tags = await Tag.find().distinct('_id')\n\t\t\tctx.body = tags\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\taddTag: async (ctx, next) => {\n\t\tlet tags = []\n\t\ttry {\n\t\t\tfor (let i in ctx.request.body) {\n\t\t\t\ttags.push({ name:  ctx.request.body[i]})\n\t\t\t}\n\t\t\tconsole.log(tags)\n\t\t\tconst tag = await Tag.create(tags)\n\t\t\tctx.body = tag\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\taddAgeCategory: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst category = new AgeCategory(ctx.request.body)\n\t\t\t\t// name: 'half',\n\t\t\t\t// slug: 'half',\n\t\t\t\t// description: 'halfdesc'\n\t\t\tcategory.save()\n\t\t\tctx.body = category\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetCategories: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst categories = await AgeCategory.find()\n\t\t\tctx.body = categories\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tadd: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst cartoon = await new Cartoon(ctx.request.body)\n\t\t\tcartoon.save()\n\t\t\tctx.body = cartoon\n\t\t\tawait redisClient.set(`cartoon`, cartoon._id.toString(), redis.print);\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t},\n\tgetAll: async (ctx, next) => {\n\t\tdebug('start getting')\n\t\tconst cartoons = await Cartoon.find({})\n\t\tif (cartoons) {\n\t\t\tctx.body = cartoons\n\t\t} else {\n\t\t\tctx.body = 'Nothing was found'\n\t\t}\t\n\t\tdebug('finish getting')\n\t},\n\tgetOne: async (ctx, next) => {\n\t\tconst cartoon = await Cartoon.find({ slug: ctx.params.slug })\n\t\tctx.body = cartoon\n\t},\n\tgetRedis: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst el = await getAsync(`cartoon`)\n\t\t\tctx.body = el\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t\tctx.body = e\n\t\t}\n\t},\n\tgetMongo: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst cartoon = await Cartoon.find({ _id: '5a74e75c180fa800bba8fe3e' })\n\t\t\tctx.body = cartoon\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t\tctx.body = e\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/cartoon.js","import { Entry } from '../models/entry'\nexport default {\n\taddEntry: async (ctx, next) => {\n\t\ttry {\n\t\t\tconst entry = new Entry(ctx.request.body)\n\t\t\tentry.save()\n\t\t\tctx.body = entry\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/entry.js","import redis from 'redis'\nimport passport from 'koa-passport'\nimport User from '../models/user'\nimport jwtService from '../services/jwt-service';\nimport { redisClient, getAsync } from '../handlers/redis'\n\nexport default {\n\tsignUp: async (ctx, next) => {\n\t\tconsole.log(ctx.request.body)\n\t\ttry {\n\t\t\tconst user = await new User(ctx.request.body)\n\t\t\tawait user.save()\n\t\t\tctx.body = user\n\t\t}\n\t\tcatch (err) {\n\t\t\tctx.status = 400;\n\t\t\tctx.body = err\n\t\t\tconsole.log(err)\n\t\t}\n\t},\n\tsignIn: async (ctx, next) => {\n\t\tawait passport.authenticate('local', async (err, user) => {\n\t\t\tconst { email, password } = ctx.request.body;\n\t\t\tif (user == false) {\n\t\t\t\tctx.body = \"Login failed\"\n\t\t\t} else {\n\t\t\t\tconst accessToken = await jwtService.genToken({ id: user._id, username: user.username }, '2m')\n\t\t\t\tconst refreshToken = await jwtService.genToken({ username: user.username }, '30d')\n\t\t\t\tctx.body = { \n\t\t\t\t\taccessToken: accessToken,\n\t\t\t\t\trefreshToken: refreshToken\n\t\t\t\t}\n\t\t\t\tawait redisClient.set(`token_${user.username}`, accessToken, redis.print);\n\t\t\t\tawait redisClient.set(`refreshToken${user.username}`, refreshToken, redis.print);\n\t\t\t\treturn ctx.login(user)\n\t\t\t}\n\t\t})(ctx, next)\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","import redis from 'redis'\nimport jwtService from '../services/jwt-service'\nimport User from '../models/user'\nimport { redisClient, getAsync } from '../handlers/redis'\n\nconst debug = require('debug')('app:nuxt')\n\nexport default () => async (ctx, next) => {\n\tdebug('token has not recieved')\n\tconst token = ctx.response.header.authorization\n\tlet decoded = null\n\tif (!token) {\n\t\tctx.throw(403, { message: 'Unauth' })\n\t}\n\ttry {\n\t\tdecoded = await jwtService.verify(token)\n\t} catch (e) {\n\t\tconst refreshToken = ctx.response.header['refresh-token']\n\t\tdecoded = await jwtService.verifyNoExp(token)\n\t\tconst confirmedRefreshToken = await getAsync(`refreshToken${decoded.username}`)\n\t\tif (e.name === 'TokenExpiredError' && confirmedRefreshToken === refreshToken) {\n\t\t\tconst newAccessToken = await jwtService.genToken({ id: decoded._id, username: decoded.username }, '2m')\n\t\t\tconst newRefreshToken = await jwtService.genToken({ username: decoded.username }, '30d')\n\t\t\tawait redisClient.set(`token_${decoded.username}`, newAccessToken, redis.print)\n\t\t\tawait redisClient.set(`refreshToken${decoded.username}`, newRefreshToken, redis.print)\n\t\t}\n\t}\n\tdebug('token recieved')\n\ttry {\n\t\tconst user = await User.findOne({ username: decoded.username })\n\t\tdebug('user found', user)\n\t\tnext()\n\t} catch (e) {\n\t\tctx.throw(403, { message: 'Unauth' })\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./server/handlers/checkUser.js","import jwtService from './services/jwt-service'\nimport jwt from 'jsonwebtoken'\n\nimport { redisClient, getAsync } from './handlers/redis'\nimport User from './models/user'\n\nconst debug = require('debug')('app:nuxt')\n\nexport default () => async (ctx, next) => {\n\tdebug('jwt start')\n\tconst { authorization } = ctx.request.header\n\tif (!authorization) {\n\t\tconsole.log('next')\n\t\treturn await next()\n\t}\n\tconst { username } = await jwtService.verify(authorization)\n\tdebug('refresh token verified')\n\ttry {\n\t\tconst token = await getAsync(`token_${username}`)\n\t\tctx.set('Authorization', token)\n\t\tctx.set('Refresh-Token', authorization)\n\t\tdebug('jwt access token recieved')\n\t} catch (e) {\n\t\tctx.throw(401, { message: 'Unauthorized. Invalid Token' })\n\t}\n\tawait next()\n}\n\n\n// WEBPACK FOOTER //\n// ./server/jwt.js","import Sequelize from 'sequelize'\nimport SequelizeSlugify from 'sequelize-slugify'\nimport sequelize from '../postgres-connector'\n\nconst Cartoon = sequelize.define('cartoon', {\n\tcartoonId: { \n\t\tallowNull: false,\n\t\tprimaryKey: true,\n\t\ttype: Sequelize.STRING\n\t},\n\tslug: {\n\t\ttype: Sequelize.STRING,\n\t\tunique: true\n\t},\n\ttitle: Sequelize.STRING,\n\tdescription: Sequelize.TEXT,\n\tunclear: Sequelize.TEXT,\n\tvideo: Sequelize.STRING,\n\tyear: Sequelize.INTEGER,\n\tthumbnail: Sequelize.STRING,\n\tauthor: Sequelize.STRING,\n\tisMultiseries: Sequelize.BOOLEAN,\n\tparentTitleId: Sequelize.STRING\n})\n\nconst Tag = sequelize.define('tags', {\n\tid: {\n\t\ttype: Sequelize.INTEGER,\n\t\tprimaryKey: true,\n\t\tautoIncrement: true\n\t},\n\tname: {\n\t\ttype: Sequelize.STRING\n\t},\n\tslug: {\n\t\ttype: Sequelize.STRING\n\t},\n\tdescription: Sequelize.TEXT\n})\n\nconst Categories = sequelize.define('categories', {\n\tcategoriesId: { \n\t\tprimaryKey: true,\n\t\tautoIncrement: true,\n\t\ttype: Sequelize.INTEGER\n\t},\n\tname: {\n\t\ttype: Sequelize.STRING\n\t},\n\tslug: {\n\t\ttype: Sequelize.STRING,\n\t\tunique: true\n\t},\n\tdescription: Sequelize.TEXT\n})\n\nvar CartoonTags = sequelize.define('cartoontags', {\n\tid : {\n\t\ttype: Sequelize.INTEGER,\n\t\tprimaryKey: true,\n\t\tautoIncrement: true\n\t},\n\ttag_id: {\n\t\ttype: Sequelize.INTEGER,\n\t\tunique: 'item_tag_taggable'\n\t},\n\ttaggable: {\n\t\ttype: Sequelize.STRING,\n\t\tunique: 'item_tag_taggable'\n\t},\n\ttaggable_id: {\n\t\ttype: Sequelize.INTEGER,\n\t\tunique: 'item_tag_taggable',\n\t\treferences: null\n\t}\n})\n\nCartoon.belongsTo(Categories, { foreignKey: 'categoriesId' })\nCategories.hasMany(Cartoon, { foreignKey: 'categoriesId' })\n\nCartoon.belongsToMany(Tag, {\n\tthrough: {\n\t\tmodel: CartoonTags,\n\t\tunique: false,\n\t\tscope: {\n\t\t\ttaggable: 'cartoon'\n\t\t}\n\t},\n\tforeignKey: 'taggable_id',\n\tconstraints: false\n})\nTag.belongsToMany(Cartoon, { \n\tthrough: {\n\t\tmodel: CartoonTags,\n\t\tunique: false\n\t},\n\tforeignKey: 'tag_id',\n\tconstraints: false\n})\nSequelizeSlugify.slugifyModel(Categories, {\n\tsource: ['name']\n})\nSequelizeSlugify.slugifyModel(Cartoon, {\n\tsource: ['title']\n})\nSequelizeSlugify.slugifyModel(Tag, {\n\tsource: ['name']\n})\nexport {\n\tCartoon,\n\tTag,\n\tCartoonTags,\n\tCategories\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/_cartoon.js","import Sequelize from 'sequelize'\nimport sequelize from '../postgres-connector'\nimport SequelizeSlugify from 'sequelize-slugify'\n\nconst Audio = sequelize.define('audio', {\n\ttitle: Sequelize.STRING,\n\tthumbnail: Sequelize.STRING,\n\taudio: Sequelize.STRING,\n\tslug: Sequelize.STRING\n})\n\nconst Category = sequelize.define('audiocategories', {\n\tname: {\n\t\ttype: Sequelize.STRING\n\t},\n\tslug: {\n\t\ttype: Sequelize.STRING,\n\t\tunique: true\n\t},\n\tdescription: Sequelize.TEXT\n})\n\nAudio.belongsTo(Category, { foreignKey: 'audiocategoriesId' })\nCategory.hasMany(Audio, { foreignKey: 'audiocategoriesId' })\n\nSequelizeSlugify.slugifyModel(Category, {\n\tsource: ['name']\n})\nSequelizeSlugify.slugifyModel(Audio, {\n\tsource: ['title']\n})\n\nexport {\n\tAudio,\n\tCategory\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/audio.js","import mongoose, { Schema } from 'mongoose'\n\nconst ageCategorySchema = new Schema({\n\tname: String,\n\tslug: String,\n\tdescription: String\n})\nconst tagSchema = new Schema({\n\tname: { type: String }\n})\n\nconst cartoonSchema = new Schema({\n\ttitle: { type: String },\n\tslug: { type: String },\n\tisMultiseries: { type: Boolean },\n\tthumbnail: { type: String },\n\tyear: { type: Number },\n\tvideo: { type: String },\n\tmultiseriesTitle: { type: Schema.Types.ObjectId },\n\ttags: { type: [Schema.Types.ObjectId], ref: 'Tag' },\n\tauthor: { type: String },\n\tunclear: { type: String },\n\tdescription: { type: String },\n\tcategory: { type: Schema.Types.ObjectId, ref: 'AgeCategory' }\n})\n\nexport const Tag = mongoose.model('Tag', tagSchema, 'Tags')\nexport const Cartoon = mongoose.model('Cartoon', cartoonSchema, 'Cartoons')\nexport const AgeCategory = mongoose.model('AgeCategory', ageCategorySchema, 'Categories')\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/cartoon.js","import mongoose, { Schema } from 'mongoose'\n\nconst entrySchema = new Schema({\n\ttitle: { type: String },\n\tthumbnail: { type: String },\n\tcategory: { type: String },\n\tcontent: { type: String },\n\tslug: { type: String }\n})\n\nexport const Entry = mongoose.model('Entry', entrySchema, 'Entries')\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/entry.js","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"cloudinary\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cloudinary\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"koa-decoded-querystring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-decoded-querystring\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"koa-multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-multer\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"koa2-formidable\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-formidable\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"mongoose-unique-validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose-unique-validator\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 44\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 45\n// module chunks = 0","module.exports = require(\"slug-generator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"slug-generator\"\n// module id = 46\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 47\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 48\n// module chunks = 0","import Koa from 'koa'\nimport http from 'http'\nimport { Nuxt, Builder } from 'nuxt'\nimport passport from 'koa-passport'\nimport router from './routes'\nconst debug = require('debug')('app:nuxt')\nimport mongooseConnector from './mongoose-connection'\nimport initHandlers from './handlers'\nimport { MONGO_URI } from './config'\nimport websockets from './services/socketio'\nimport sequelize from './postgres-connector'\n\nasync function start () {\n\tconst app = new Koa()\n\tconst host = process.env.HOST || '127.0.0.1'\n\tconst port = process.env.PORT || 3000\n\n\t// Import and Set Nuxt.js options\n\tlet config = require('../nuxt.config.js')\n\tconfig.dev = !(app.env === 'production')\n\n\t// Instantiate nuxt.js\n\tconst nuxt = new Nuxt(config)\n\n\t// Build in development\n\tif (config.dev) {\n\t\tconst builder = new Builder(nuxt)\n\t\tawait builder.build()\n\t}\n\t//  Passport\n\tapp.use(passport.initialize())\n\trequire('./passport').configure(passport)\n\n\t// Initial handlers\n\tinitHandlers(app)\n\n\t// JWT Handler\n\t//  app.use(jwtHandler())\n\n\t// Mongoose\n\tmongooseConnector(MONGO_URI)\n\n\t// Postgres / Sequelize\n\tsequelize\n\t.authenticate()\n\t.then(() => {\n\t\tconsole.log('Connection has been established successfully.')\n\t})\n\t.catch(err => {\n\t\tconsole.error('Unable to connect to the database:', err)\n\t})\n\n\t// Router\n\tapp.use(async (ctx, next) => {\n\t\tawait router.routes()(ctx, next)\n\t})\n\n\tapp.use(async (ctx, next) => {\n\t\tawait next()\n\t\tctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tctx.res.on('close', resolve)\n\t\t\tctx.res.on('finish', resolve)\n\t\t\tnuxt.render(ctx.req, ctx.res, promise => {\n\t\t\t// nuxt.render passes a rejected promise into callback on error.\n\t\t\t\tpromise.then(resolve).catch(reject)\n\t\t\t})\n\t\t})\n\t})\n\n\t// socket.io\n\tconst server = http.createServer(app.callback())\n\twebsockets(server)\n\n\t// listen\n\tserver.listen(port, host)\n\tdebug('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}